{"version":3,"sources":["components/firebase.js","components/imageUpload.js","components/Login.js","components/Header.js","components/Post.js","App.js","index.js"],"names":["firebaseApp","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","storage","getStorage","storageRef","ref","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","ImageUpload","useState","caption","setCaption","user","setUser","progress","setProgress","image","setImage","uploadOpen","setUploadOpen","signUpOpen","setSignUpOpen","currentUser","handleUpload","displayName","uploadRef","name","uploadTask","uploadBytesResumable","on","snapshot","prog","Math","random","bytesTransferred","totalBytes","console","log","error","alert","message","getDownloadURL","then","url","addDoc","collection","timestamp","serverTimestamp","imageUrl","username","Button","onClick","className","fontSize","Modal","onClose","open","Box","sx","value","max","Input","type","placeholder","onChange","e","target","files","document","getElementsByClassName","disabled","handleClick","Login","setOpen","openSignIn","setOpenSignIn","setUsername","email","setEmail","password","setPassword","profilePic","setProfilePic","useEffect","unsubscribe","onAuthStateChanged","authUser","classList","toggle","Avatar","alt","src","photoURL","signOut","preventDefault","createUserWithEmailAndPassword","updateProfile","catch","signInWithEmailAndPassword","cred","Header","href","Post","backgroundImage","App","posts","setPost","unsubscribeUser","q","query","orderBy","onSnapshot","snap","docs","map","s","data","post","id","captioned","rootElement","getElementById","createRoot","render"],"mappings":"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","file":"static/js/main.f7cb709a.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport firebase from \"firebase/compat/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { getStorage, ref } from \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDRH3FFiCzcX_FeG6jrtRJedA58jmCCdH4\",\n  authDomain: \"instabyvaishali.firebaseapp.com\",\n  projectId: \"instabyvaishali\",\n  storageBucket: \"instabyvaishali.appspot.com\",\n  messagingSenderId: \"317255263530\",\n  appId: \"1:317255263530:web:0eef1bd5f30b8ea06eaa53\",\n  measurementId: \"G-FJ68NWV7GC\"\n};\n\n// Initialize Firebase\nconst firebaseApp = initializeApp(firebaseConfig);\nconst db = getFirestore(firebaseApp);\nconst auth = getAuth(firebaseApp);\nconst storage = getStorage(firebaseApp);\nconst storageRef = ref(storage);\n\n// window.firebase = firebase;\n// export default firebase;\n\nexport { firebaseConfig, db, auth, storage, storageRef, ref };\n","// import \"\";\r\n\r\nimport { Button, Input } from \"@mui/material\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { db, storage, storageRef } from \"./firebase\";\r\nimport { firebase } from \"firebase/app\";\r\n// import { getAuth } from \"firebase/auth\";\r\nimport {\r\n  getDownloadURL,\r\n  uploadBytes,\r\n  uploadBytesResumable,\r\n  ref\r\n} from \"firebase/storage\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  serverTimestamp\r\n} from \"@firebase/firestore\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Box from \"@mui/material/Box\";\r\n// import AddCircleOutlineRoundedIcon from \"@material-ui/icons/AddCircleOutlineRounded\";\r\nimport AddBoxOutlinedIcon from \"@material-ui/icons/AddBoxOutlined\";\r\nimport \"./imageUpload.css\";\r\n\r\nconst style = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: 400,\r\n  bgcolor: \"background.paper\",\r\n  border: \"2px solid #000\",\r\n  boxShadow: 24,\r\n  p: 4\r\n};\r\n\r\nexport default function ImageUpload() {\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [user, setUser] = useState(\"\");\r\n  const [progress, setProgress] = useState(0);\r\n  const [image, setImage] = useState(null);\r\n  const [uploadOpen, setUploadOpen] = useState(false);\r\n  const [signUpOpen, setSignUpOpen] = useState(false);\r\n\r\n  const auth = getAuth();\r\n  const currentUser = auth.currentUser;\r\n\r\n  const handleClick = (e) => {\r\n    if (e.target.files[0]) {\r\n      setImage(e.target.files[0]);\r\n      document.getElementsByClassName(\"popup-btn\")[0].disabled = false;\r\n      //   console.log(\"mmmm\", image);\r\n    }\r\n  };\r\n  const handleUpload = () => {\r\n    // const auth = getAuth();\r\n    // const currentUser = auth.currentUser;\r\n    if (currentUser != null) {\r\n      //   console.log(\"user\", currentUser);\r\n      setUser(currentUser.displayName);\r\n      //   console.log(user);\r\n    }\r\n    // createPost();\r\n    //storage\r\n    const uploadRef = ref(storageRef, `images/${image.name}`);\r\n    const uploadTask = uploadBytesResumable(uploadRef, image);\r\n    // uploadBytes(uploadTask, image).then((snapshot) => {\r\n    //   console.log(\"snap\", snapshot);\r\n    // });\r\n\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapshot) => {\r\n        const prog =\r\n          Math.random(snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n        console.log(\"prog\", prog);\r\n        setProgress(prog);\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n        alert(error.message);\r\n      },\r\n      () => {\r\n        // storage.ref(\"images\")\r\n        // .child(image.name)\r\n        console.log(user);\r\n        getDownloadURL(uploadTask.snapshot.ref).then((url) => {\r\n          console.log(url + \".....\" + typeof url);\r\n          addDoc(collection(db, \"posts\"), {\r\n            timestamp: serverTimestamp(),\r\n            caption: caption,\r\n            imageUrl: url,\r\n            username: user\r\n          });\r\n        });\r\n        setProgress(\"\");\r\n        setImage(null);\r\n        setCaption(\"\");\r\n        setUploadOpen(false);\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={() => setUploadOpen(true)} className={`add_post-btn ${auth.currentUser?.displayName ? '' : \"hide\"} `}>\r\n        <AddBoxOutlinedIcon fontSize=\"large\" className=\"add_post\" />\r\n      </Button>\r\n      {auth.currentUser?.displayName ? (\r\n        <Modal onClose={() => setUploadOpen(false)} open={uploadOpen}>\r\n          <Box sx={style} className=\"popup-modal\">\r\n            <progress value={progress} max=\"100\" className=\"progress-bar\" />\r\n            <Input\r\n              className=\"popup-input\"\r\n              type=\"text\"\r\n              placeholder=\"Enter a caption...\"\r\n              onChange={(e) => setCaption(e.target.value)}\r\n            />\r\n            <Input\r\n              className=\"popup-input\"\r\n              type=\"file\"\r\n              placeholder=\"Enter image ...\"\r\n              onChange={(e) => handleClick(e)}\r\n            />\r\n            {image != null ? (\r\n              <Button\r\n                type=\"submit\"\r\n                onClick={handleUpload}\r\n                className=\"popup-btn\"\r\n              >\r\n                Upload\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                type=\"submit\"\r\n                onClick={handleUpload}\r\n                className=\"popup-btn\"\r\n                disabled\r\n              >\r\n                Upload\r\n              </Button>\r\n            )}\r\n          </Box>\r\n        </Modal>\r\n      ) : (\r\n        <Modal onClose={() => setSignUpOpen(false)} open={signUpOpen}>\r\n          <Box sx={style} className=\"popup-modal\">\r\n            <h2>Sorry you need to login to upload</h2>\r\n          </Box>\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\nimport Modal from \"@mui/material/Modal\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Input from \"@mui/material/Input\";\nimport \"./Login.css\";\nimport { auth } from \"./firebase.js\";\nimport {\n  createUserWithEmailAndPassword,\n  onAuthStateChanged,\n  signInWithEmailAndPassword,\n  updateProfile\n} from \"firebase/auth\";\nimport ImageUpload from \"./imageUpload\";\n\nconst style = {\n  position: \"absolute\",\n  top: \"50%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n  width: 400,\n  bgcolor: \"background.paper\",\n  border: \"2px solid #000\",\n  boxShadow: 24,\n  p: 4\n};\n\nexport default function Login() {\n  const [open, setOpen] = useState(false);\n  const [openSignIn, setOpenSignIn] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [user, setUser] = useState(null);\n  const [profilePic, setProfilePic] = useState(null);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (authUser) => {\n      //checks if user is logged-in  in case of refresh\n      if (authUser) {\n        //user has logged in\n        // console.log(\"a\", authUser.user);\n        setUser(authUser);\n      } else {\n        //user has logged out\n        setUser(null);\n      }\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [user, username]);\n\n  const signUp = (e) => {\n    e.preventDefault();\n\n    createUserWithEmailAndPassword(auth, email, password)\n      .then((authUser) => {\n        console.log(\"a2\", authUser.user);\n        updateProfile(authUser.user, {\n          displayName: username,\n          photoURL: profilePic\n        }).then(() => {\n          console.log(\"Profile updated!!\", authUser.user);\n          setOpen(false);\n        });\n      })\n      .catch((error) => alert(error.message));\n  };\n\n  const signIn = (e) => {\n    e.preventDefault();\n\n    signInWithEmailAndPassword(auth, email, password)\n      .then((cred) => {\n        console.log(cred);\n        setOpenSignIn(false);\n      })\n      .catch((error) => alert(error.message));\n    // setOpenSignIn(false);\n  };\n  const handleProfile = () => {\n    document.getElementsByClassName(\"logout_btn\")[0].classList.toggle(\"hide\");\n  };\n\n  return (\n    <>\n      {user ? (\n        <div className=\"btns\">\n          <Button onClick={handleProfile} className=\"profile_btn\">\n            <Avatar\n              className=\"header_avatar\"\n              alt={auth.currentUser?.displayName}\n              src={\n                auth.currentUser?.photoURL\n                  ? auth.currentUser.photoURL\n                  : \"/static/images/1.png\"\n              }\n            />\n          </Button>\n          <Button className=\"logout_btn hide\" onClick={() => auth.signOut()}>\n            Log Out\n          </Button>\n        </div>\n      ) : (\n        <>\n          <Button onClick={() => setOpenSignIn(true)}>Sign In</Button>\n          <Button onClick={() => setOpen(true)}>Sign Up</Button>\n        </>\n      )}\n      <Modal onClose={() => setOpen(false)} open={open}>\n        <Box sx={style}>\n          <form className=\"login_form signup_form\">\n            <Input\n              placeholder=\"Username\"\n              type=\"text\"\n              value={username}\n              className=\"form_name\"\n              onChange={(e) => setUsername(e.target.value)}\n            />\n            <Input\n              placeholder=\"Email\"\n              type=\"email\"\n              value={email}\n              className=\"form_email\"\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <Input\n              placeholder=\"Password\"\n              type=\"password\"\n              value={password}\n              className=\"form_password\"\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <Input\n              placeholder=\"Profile Pic\"\n              type=\"text\"\n              value={profilePic}\n              className=\"form_pic\"\n              onChange={(e) => setProfilePic(e.target.value)}\n            />\n            <Button type=\"submit\" className=\"signup_btn\" onClick={signUp}>\n              Sign up\n            </Button>\n          </form>\n        </Box>\n      </Modal>\n\n      <Modal onClose={() => setOpenSignIn(false)} open={openSignIn}>\n        <Box sx={style}>\n          <form className=\"login_form\">\n            <Input\n              placeholder=\"Email\"\n              type=\"email\"\n              value={email}\n              className=\"form_email\"\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <Input\n              placeholder=\"Password\"\n              type=\"password\"\n              value={password}\n              className=\"form_password\"\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <Button type=\"submit\" className=\"signin_btn\" onClick={signIn}>\n              Sign In\n            </Button>\n          </form>\n        </Box>\n      </Modal>\n\n      <ImageUpload />\n      {/* {user?.displayName ? (\n        <ImageUpload />\n      ) : (\n        <h2>Sorry you need to login to upload</h2>\n      )} */}\n    </>\n  );\n}\n","import \"./Header.css\";\nimport Login from \"./Login.js\";\n\nimport ImageUpload from \"./imageUpload\";\n// import { useState } from \"react\";\n\nexport default function Header() {\n  // const [uploadOpen, setUploadOpen] = useState(false);\n\n  // const handleClick = () => {\n  //   console.log(\"clicked\");\n  //   // setUploadOpen(true);\n  // };\n  return (\n    <div className=\"header_wrapper\">\n      <div className=\"header_wrap\">\n      <a href='/'>\n        <img\n          src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\"\n          alt=\"instagram logo\"\n          className=\"logo\"\n        />\n      </a>\n\n        <div className=\"header-right\">\n          <Login />\n          {/* <ImageUpload />; */}\n        </div>\n      </div>\n    </div>\n  );\n}\n","// import Avatar from \"@material-ui/core/Avatar\";\n// import { useState } from \"react\";\nimport { getAuth } from \"firebase/auth\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport \"./Post.css\";\n// import Avatar from \"@material-ui/core/Avatar\";\n\nexport default function Post({ caption, imageUrl }) {\n  // const [user, setUser] = useState(null);\n  const auth = getAuth();\n  const currentUser = auth.currentUser;\n  // if (currentUser != null) {\n  //   setUser(currentUser?.displayName);\n  // }\n  // console.log(\"auth\", auth.currentUser);\n\n  return (\n    <div className=\"post_wrapper\">\n      {/* <h1>Yo</h1> */}\n      <div className=\"post_header\">\n        <Avatar\n          className=\"post_avatar\"\n          alt={auth.currentUser?.displayName}\n          src={\n            auth.currentUser?.photoURL\n              ? auth.currentUser.photoURL\n              : \"/static/images/1.png\"\n          }\n        />\n        <h3 className=\"\">{auth.currentUser?.displayName}</h3>\n      </div>\n      <div\n        className=\"post_content\"\n        style={{\n          backgroundImage: `url(${imageUrl})`\n        }}\n      >\n        <img src={imageUrl} className=\"post_image\" />\n      </div>\n      {caption ? (\n        <div className=\"post_caption\">\n          <h4 className=\"post_caption-name\">{auth.currentUser?.displayName}</h4>\n          <p className=\"post_caption-text\">{caption}</p>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n","import \"./styles.css\";\nimport { useState, useEffect } from \"react\";\nimport Header from \"./components/Header\";\nimport Post from \"./components/Post\";\nimport { InstagramEmbed } from \"react-social-media-embed\";\nimport { db, firebaseApp } from \"./components/firebase\";\nimport {\n  getFirestore,\n  doc,\n  getDoc,\n  collection,\n  getDocs,\n  onSnapshot,\n  orderBy,\n  query\n} from \"firebase/firestore\";\nimport { auth } from \"./components/firebase\";\n\nimport {\n  onAuthStateChanged\n} from \"firebase/auth\";\n// import { Instagram } from \"reactjs-social-embed\";\n\nexport default function App() {\n  const [posts, setPost] = useState([]);\n  const [user, setUser] = useState(null);\n  // const auth= getAuth();\n  // console.log(auth.user)\n  // const q=[],unsubscribe={};\n\n  useEffect(() => {\n    const unsubscribeUser = onAuthStateChanged(auth, (authUser) => {\n      //checks if user is logged-in  in case of refresh\n      if (authUser) {\n        //user has logged in\n        // console.log(\"a\", authUser.user);\n        setUser(authUser);\n      } else {\n        //user has logged out\n        setUser(null);\n      }\n    });\n\n    \n    // console.log(db.collection(\"posts\"));\n    // const q = getDocs(collection(db, \"posts\"));\n    // console.log(q.then(doc=> doc.data() ) );\n    // q.then((doc) => console.log(doc._snapshot.docChanges[0].doc.data.value.mapValue.fields));\n    // q.forEach((doc) => {\n    //   console.log(doc.id + \".......\" + doc.data());\n    // });\n    // db.collection(\"posts\").onSnapshot((snapshot) => {\n    //   setPost(snapshot.docs.map((doc) => doc.data()));\n    // });\n    //correct one\n    const q = query(collection(db, \"posts\"), orderBy(\"timestamp\", \"desc\"));\n    const unsubscribe = onSnapshot(q, (snap) => {\n      setPost(snap.docs.map((s) => s.data()));\n    });\n      \n      return unsubscribe,unsubscribeUser;\n    //correct end\n  }, [posts]);\n  // const memoized = useMemo(()=>{\n  //    unsubscribe = onSnapshot(q, (snap) => {\n  //       setPost(snap.docs.map((s) => s.data()));\n  //     });\n  // },[q])\n\n  // const q = getDocs(collection(db, \"posts\"));\n  // q.forEach((doc) => {\n  //     console.log(`${doc.id} => ${doc.data()}`);\n  //   });\n\n  // const firestore = getFirestore(firebaseApp);\n  // const special = collection(firestore, \"posts\");\n  // async function readASingleDoc() {\n  //   const mySnap = await getDocs(special);\n  // console.log(mySnap);\n  // if (mySnap.exists()) {\n  // const docData = mySnap.data();\n  // console.log(`My data is ${JSON.stringify(docData)}`);\n  // }\n  // }\n\n  // readASingleDoc();\n\n  return (\n    <div className=\"app_wrapper\">\n      <Header />\n\n    <div className={`body_wrapper ${user ? '' : \"no-data\"}` }>\n        <div className=\"body_left_wrapper\">\n         { user\n          ? \n          <>\n          {posts.map((post) => (\n            // console.log(post)\n            <Post\n              key={post.id}\n              username={post.username}\n              caption={post.caption}\n              imageUrl={post.imageUrl}\n            />\n          ))}\n          </>\n      \n\n          \n          \n          //   <>\n          //  <Post\n          //   username=\"Vaishali\"\n          //   caption=\"Hey\"\n          //   imageUrl=\"https://images.unsplash.com/photo-1420593248178-d88870618ca0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8bmF0dXJhbHxlbnwwfHwwfHw%3D&w=1000&q=80\"\n          // />\n          // <Post\n          //   username=\"Vaishali\"\n          //   caption=\"Butterfly\"\n          //   imageUrl=\"https://images.unsplash.com/photo-1516475429286-465d815a0df7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=580&q=80\"\n          // />\n          // <Post\n          //   username=\"Vaishali\"\n          //   caption=\"Hey\"\n          //   imageUrl=\"https://natureconservancy-h.assetsadobe.com/is/image/content/dam/tnc/nature/en/photos/Zugpsitze_mountain.jpg?crop=0%2C176%2C3008%2C1654&wid=4000&hei=2200&scl=0.752\"\n          // />\n          // <Post\n          //   username=\"Vaishali\"\n          //   caption=\"Hey\"\n          //   imageUrl=\"https://img.fixthephoto.com/blog/images/gallery/news_preview_mob_image__preview_579.jpg\"\n          //  /> \n          //  </>\n          \n          \n\n          :\n          <div className='no-data-div'>\n          <h2>Sorry you need to login</h2>\n          </div>\n         }\n        </div>\n\n        <div className=\"body_right_wrapper\">\n          <div>\n            <InstagramEmbed\n              url=\"https://www.instagram.com/p/Ck3CAHBjm0G/\"\n              width={328}\n              captioned\n            />\n          </div>\n        </div>\n      </div>\n      {/* <Post\n        username=\"Vaishali\"\n        caption=\"Beauty can be found anywhere.\"\n        imageUrl=\"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg\"\n      />\n      <Post\n        username=\"Mishti\"\n        caption=\"Be The Change\"\n        imageUrl=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4A_cJiGKT3Om_X2hdZ91l1FHfzFoVbDoJkA&usqp=CAU\"\n      /> */}\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"sourceRoot":""}